{"version":3,"file":"OpenChannelMessage.js","sources":["../../../src/smart-components/OpenChannel/components/OpenChannelMessage/RemoveMessageModal.tsx","../../../src/ui/FileViewer/types.js","../../../src/smart-components/OpenChannel/components/OpenChannelMessage/utils.ts","../../../src/smart-components/OpenChannel/components/OpenChannelMessage/index.tsx"],"sourcesContent":["import React, { useContext } from 'react'\nimport { ClientFileMessage, ClientUserMessage } from '../../../../index';\nimport Modal from '../../../../ui/Modal';\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\n\ninterface Props {\n  onCloseModal(): void;\n  onDeleteMessage(message: ClientUserMessage | ClientFileMessage, callback?: () => void): void;\n}\n\nexport default function RemoveMessageModal({\n  onCloseModal,\n  onDeleteMessage,\n}: Props): JSX.Element {\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <Modal\n      onCancel={onCloseModal}\n      onSubmit={onDeleteMessage}\n      submitText={stringSet.MESSAGE_MENU__DELETE}\n      titleText={stringSet.MODAL__DELETE_MESSAGE__TITLE}\n    />\n  );\n}\n","// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types\nconst SUPPORTED_MIMES = {\n  IMAGE: [\n    'image/jpeg',\n    'image/jpg',\n    'image/png',\n    'image/gif',\n    'image/svg+xml',\n    'image/webp', // not supported in IE\n  ],\n  VIDEO: [\n    'video/mpeg',\n    'video/ogg',\n    'video/webm',\n    'video/mp4',\n  ],\n};\n\nexport const isImage = (type) => SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;\nexport const isVideo = (type) => SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;\nexport const isGif = (type) => type === 'image/gif';\nexport const unSupported = (type) => !(isImage(type) || isVideo(type));\n\nexport default SUPPORTED_MIMES;\n","import { EveryMessage } from '../../../../index';\nimport { isImage, isVideo } from '../../../../ui/FileViewer/types';\n\nexport const MessageTypes = {\n  ADMIN: 'ADMIN',\n  USER: 'USER',\n  FILE: 'FILE',\n  THUMBNAIL: 'THUMBNAIL',\n  OG: 'OG',\n  UNKNOWN: 'UNKNOWN',\n};\n\nexport const SendingMessageStatus = {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending',\n};\n\nexport const getMessageType = (message: EveryMessage): string => {\n  if ((message.isUserMessage && message.isUserMessage()) || message.messageType === 'user') {\n    return (message.ogMetaData)\n      ? MessageTypes.OG\n      : MessageTypes.USER;\n  }\n  if (message.isAdminMessage && message.isAdminMessage()) {\n    return MessageTypes.ADMIN;\n  }\n  if (message.messageType === 'file') {\n    return (isImage(message.type) || isVideo(message.type))\n      ? MessageTypes.THUMBNAIL\n      : MessageTypes.FILE;\n  }\n  return MessageTypes.UNKNOWN;\n};\n\nexport default {\n  MessageTypes,\n  SendingMessageStatus,\n  getMessageType,\n};\n","import React, {\n  useState,\n  useRef,\n  ReactElement,\n  useMemo,\n} from 'react';\n\nimport format from 'date-fns/format';\n\nimport OpenChannelUserMessage from '../../../../ui/OpenchannelUserMessage';\nimport OpenChannelAdminMessage from '../../../../ui/OpenChannelAdminMessage';\nimport OpenChannelOGMessage from '../../../../ui/OpenchannelOGMessage';\nimport OpenChannelThumbnailMessage from '../../../../ui/OpenchannelThumbnailMessage';\nimport OpenChannelFileMessage from '../../../../ui/OpenchannelFileMessage';\n// import UnknownMessage from '../../../../ui/UnknownMessage';\n\nimport DateSeparator from '../../../../ui/DateSeparator';\nimport Label, { LabelTypography, LabelColors } from '../../../../ui/Label';\nimport MessageInput from '../../../../ui/MessageInput';\nimport FileViewer from '../../../../ui/FileViewer';\n\nimport RemoveMessageModal from './RemoveMessageModal';\nimport {\n  MessageTypes,\n  SendingMessageStatus,\n  getMessageType,\n} from './utils';\nimport { useOpenChannel } from '../../context/OpenChannelProvider';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport type { EveryMessage, RenderMessageProps } from '../../../../types';\nimport { useLocalization } from '../../../../lib/LocalizationContext';\n\nexport type OpenChannelMessageProps = {\n  renderMessage?: (props: RenderMessageProps) => React.ReactNode;\n  message: EveryMessage;\n  chainTop?: boolean;\n  chainBottom?: boolean;\n  hasSeparator?: boolean;\n  editDisabled?: boolean;\n};\n\nexport default function MessagOpenChannelMessageeHoc(props: OpenChannelMessageProps): ReactElement {\n  const {\n    message,\n    chainTop,\n    chainBottom,\n    hasSeparator,\n    renderMessage,\n  } = props;\n\n  const {\n    currentOpenChannel,\n    deleteMessage,\n    updateMessage,\n    resendMessage,\n  } = useOpenChannel();\n  const { dateLocale } = useLocalization();\n  const editDisabled = currentOpenChannel?.isFrozen;\n\n  const globalState = useSendbirdStateContext();\n  const userId = globalState?.config?.userId;\n\n  let sender: SendBird.User = null;\n  if (message?.messageType !== 'admin') {\n    sender = message?.sender;\n  }\n\n  const RenderedMessage = useMemo(() => {\n    if (renderMessage) {\n      return renderMessage({\n        message,\n        chainBottom,\n        chainTop,\n      });\n    }\n    return null;\n  }, [message, renderMessage]);\n\n  const [showEdit, setShowEdit] = useState(false);\n  const [showRemove, setShowRemove] = useState(false);\n  const [showFileViewer, setShowFileViewer] = useState(false);\n  const editMessageInputRef = useRef(null);\n\n  let isByMe = false;\n\n  if (sender && message?.messageType !== 'admin') {\n    // pending and failed messages are by me\n    isByMe = (userId === sender.userId)\n      || (message?.requestState === SendingMessageStatus.PENDING)\n      || (message?.requestState === SendingMessageStatus.FAILED);\n  }\n\n  if(RenderedMessage) {\n    return (\n      <div className=\"sendbird-msg-hoc sendbird-msg--scroll-ref\">\n        <RenderedMessage />\n      </div>\n    );\n  }\n\n  if (message?.messageType === 'user' && showEdit) {\n    return (\n      <MessageInput\n        isEdit\n        disabled={editDisabled}\n        ref={editMessageInputRef}\n        name={message?.messageId}\n        onSendMessage={updateMessage}\n        onCancelEdit={() => { setShowEdit(false); }}\n        value={message?.message}\n      />\n    );\n  }\n\n  return (\n    <div className=\"sendbird-msg-hoc sendbird-msg--scroll-ref\">\n      {/* date-separator */}\n      {\n        hasSeparator && (\n          <DateSeparator>\n            <Label type={LabelTypography.CAPTION_2} color={LabelColors.ONBACKGROUND_2}>\n              {format(message?.createdAt, 'MMMM dd, yyyy', {\n                locale: dateLocale,\n              })}\n            </Label>\n          </DateSeparator>\n        )\n      }\n      {/* Message */}\n      {\n        {\n          [MessageTypes.ADMIN]: (() => {\n            if (message?.messageType === 'admin') {\n              return (\n                <OpenChannelAdminMessage message={message} />\n              )\n            }\n          })(),\n          [MessageTypes.FILE]: (() => {\n            if (message?.messageType === 'file') {\n              return (\n                <OpenChannelFileMessage\n                  message={message}\n                  disabled={editDisabled}\n                  userId={userId}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.OG]: (() => {\n            if (message?.messageType === 'user') {\n              return (\n                <OpenChannelOGMessage\n                  message={message}\n                  userId={userId}\n                  showEdit={setShowEdit}\n                  disabled={editDisabled}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.THUMBNAIL]: (() => {\n            if (message?.messageType === 'file') {\n              return (\n                <OpenChannelThumbnailMessage\n                  message={message}\n                  disabled={editDisabled}\n                  userId={userId}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  onClick={setShowFileViewer}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.USER]: (() => {\n            if (message?.messageType === 'user') {\n              return (\n                <OpenChannelUserMessage\n                  message={message}\n                  userId={userId}\n                  disabled={editDisabled}\n                  showEdit={setShowEdit}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.UNKNOWN]: (() => {\n            return;\n            // return (\n            //   <OpenChannelUnknownMessage message={message} />\n            // );\n          })(),\n        }[getMessageType(message)]\n      }\n      {/* Modal */}\n      {\n        showRemove && (\n          <RemoveMessageModal\n            onCloseModal={() => setShowRemove(false)}\n            onDeleteMessage={() => {\n              if (message?.messageType !== 'admin') {\n                deleteMessage(message);\n              }\n            }}\n          />\n        )\n      }\n      {\n        (showFileViewer && message?.messageType === 'file') && (\n          <FileViewer\n            onClose={() => setShowFileViewer(false)}\n            message={message}\n            onDelete={() => deleteMessage(message)}\n            isByMe={isByMe}\n          />\n        )\n      }\n      {/* {\n        !((message?.isFileMessage && message?.isFileMessage()) || message?.messageType === 'file')\n        && !(message?.isAdminMessage && message?.isAdminMessage())\n        && !(((message?.isUserMessage && message?.isUserMessage()) || message?.messageType === 'user'))\n        && !(showFileViewer)\n        && (\n          <UnknownMessage\n            message={message}\n            isByMe={isByMe}\n            showRemove={setShowRemove}\n            chainTop={chainTop}\n            chainBottom={chainBottom}\n          />\n        )\n      } */}\n    </div>\n  );\n}\n"],"names":["RemoveMessageModal","_a","onCloseModal","onDeleteMessage","stringSet","useContext","LocalizationContext","React","MESSAGE_MENU__DELETE","MODAL__DELETE_MESSAGE__TITLE","SUPPORTED_MIMES","IMAGE","VIDEO","isImage","type","indexOf","isVideo","MessageTypes","ADMIN","USER","FILE","THUMBNAIL","OG","UNKNOWN","SendingMessageStatus","NONE","SUCCEEDED","FAILED","PENDING","getMessageType","message","isUserMessage","messageType","ogMetaData","isAdminMessage","MessagOpenChannelMessageeHoc","props","chainTop","chainBottom","hasSeparator","renderMessage","_c","useOpenChannel","currentOpenChannel","deleteMessage","updateMessage","resendMessage","dateLocale","useLocalization","editDisabled","isFrozen","globalState","useSendbirdStateContext","userId","config","sender","RenderedMessage","useMemo","_d","useState","showEdit","setShowEdit","_e","showRemove","setShowRemove","_f","showFileViewer","setShowFileViewer","editMessageInputRef","useRef","isByMe","requestState","messageId","LabelTypography","CAPTION_2","LabelColors","ONBACKGROUND_2","format","createdAt","locale","OpenChannelFileMessage","OpenChannelOGMessage","OpenChannelThumbnailMessage","OpenChannelUserMessage"],"mappings":"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"}