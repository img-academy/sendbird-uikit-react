{"version":3,"file":"openChannelUtils-416eb4e3.js","sources":["../../src/utils/openChannelUtils.ts"],"sourcesContent":["import Sendbird from 'sendbird';\nimport { ClientUserMessage, ClientFileMessage } from '../index';\n\nconst OpenChannelMessageStatusTypes = {\n  NONE: 'none',\n  PENDING: 'pending',\n  FAILED: 'failed',\n  CANCELED: 'canceled',\n  SUCCEEDED: 'succeeded'\n};\n\nexport const getSenderFromMessage = (message: ClientUserMessage | ClientFileMessage): Sendbird.User => {\n  return message.sender || message._sender;\n};\n\nexport const checkIsSent = (status: string): boolean => (status === OpenChannelMessageStatusTypes.SUCCEEDED);\nexport const checkIsPending = (status: string): boolean => (status === OpenChannelMessageStatusTypes.PENDING);\nexport const checkIsFailed = (status: string): boolean => (status === OpenChannelMessageStatusTypes.FAILED);\n\nexport const checkIsByMe = (message: ClientFileMessage | ClientUserMessage, userId: string): boolean => (getSenderFromMessage(message).userId === userId);\n\ninterface isFineCopyParams {\n  message: ClientUserMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineCopy = ({ message }: isFineCopyParams): boolean => {\n  return (message.messageType === 'user' && message.message.length > 0);\n};\n\ninterface isFineResendParams {\n  message: ClientFileMessage | ClientUserMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineResend = ({ message, status, userId }: isFineResendParams): boolean => {\n  return checkIsByMe(message, userId)\n    && checkIsFailed(status)\n    && message.isResendable\n    && message.isResendable();\n};\n\ninterface isFineEditParams {\n  message: ClientUserMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineEdit = ({ message, status, userId }: isFineEditParams): boolean => {\n  return checkIsByMe(message, userId) && checkIsSent(status);\n};\n\ninterface isFineDeleteParams {\n  message: ClientFileMessage | ClientUserMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineDelete = ({ message, userId }: isFineDeleteParams): boolean => {\n  return checkIsByMe(message, userId);\n};\n\ninterface showMenuTriggerParams {\n  message: ClientUserMessage | ClientFileMessage;\n  status: string;\n  userId: string;\n}\nexport const showMenuTrigger = (props: showMenuTriggerParams): boolean => {\n  const { message, status, userId } = props;\n  if (message.messageType === 'user') {\n    return (\n      isFineDelete({ message, status, userId })\n      || isFineEdit({ message, status, userId })\n      || isFineCopy({ message, status, userId })\n      || isFineResend({ message, status, userId })\n    );\n  } else {\n    return (\n      isFineDelete({ message, status, userId })\n      || isFineResend({ message, status, userId })\n    );\n  }\n};\n"],"names":["OpenChannelMessageStatusTypes","NONE","PENDING","FAILED","CANCELED","SUCCEEDED","getSenderFromMessage","message","sender","_sender","checkIsSent","status","checkIsPending","checkIsFailed","checkIsByMe","userId","isFineCopy","_a","messageType","length","isFineResend","isResendable","isFineEdit","isFineDelete","showMenuTrigger","props"],"mappings":"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"}