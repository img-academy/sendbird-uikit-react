{"version":3,"file":"MessageSearch.js","sources":["../../src/smart-components/MessageSearch/index.tsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport './index.scss';\n\nimport MessageSearch, { MessageSearchUIProps } from './components/MessageSearchUI';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport Icon, { IconTypes, IconColors } from '../../ui/Icon';\nimport IconButton from '../../ui/IconButton';\nimport Label, { LabelTypography, LabelColors } from '../../ui/Label';\nimport Loader from '../../ui/Loader';\nimport { MessageSearchProvider, MessageSearchProviderProps } from './context/MessageSearchProvider';\n\nexport interface MessageSearchPannelProps extends\n  MessageSearchUIProps, MessageSearchProviderProps {\n  onResultClick?: (message) => void;\n  onCloseClick?: () => void;\n}\n\nconst COMPONENT_CLASS_NAME = 'sendbird-message-search-pannel';\n\nfunction MessageSearchPannel(props: MessageSearchPannelProps): JSX.Element {\n  const {\n    channelUrl,\n    onResultClick,\n    onCloseClick,\n    messageSearchQuery,\n    renderPlaceHolderError,\n    renderPlaceHolderLoading,\n    renderPlaceHolderNoString,\n    renderPlaceHolderEmptyList,\n    renderSearchItem,\n  } = props;\n\n  const [searchString, setSearchString] = useState('');\n  const [inputString, setInputString] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  let timeout = null;\n  useEffect(() => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      setSearchString(inputString);\n      setLoading(true);\n      timeout = null;\n    }, 500);\n  }, [inputString]);\n\n  const handleOnChangeInputString = (e) => {\n    setInputString(e.target.value);\n  };\n\n  const handleOnResultLoaded = () => {\n    setLoading(false);\n  };\n\n  const handleOnClickResetStringButton = (e) => {\n    e.stopPropagation();\n    setInputString('');\n    setSearchString('');\n  };\n\n  return (\n    <div className={COMPONENT_CLASS_NAME}>\n      <div className={`${COMPONENT_CLASS_NAME}__header`}>\n        <Label\n          className={`${COMPONENT_CLASS_NAME}__header__title`}\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {stringSet.SEARCH_IN_CHANNEL}\n        </Label>\n        <IconButton\n          className={`${COMPONENT_CLASS_NAME}__header__close-button`}\n          width=\"32px\"\n          height=\"32px\"\n          onClick={onCloseClick}\n        >\n          <Icon\n            type={IconTypes.CLOSE}\n            fillColor={IconColors.ON_BACKGROUND_1}\n            width=\"22px\"\n            height=\"22px\"\n          />\n        </IconButton>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__input`}>\n        <div className={`${COMPONENT_CLASS_NAME}__input__container`}>\n            <Icon\n              className={`${COMPONENT_CLASS_NAME}__input__container__search-icon`}\n              type={IconTypes.SEARCH}\n              fillColor={IconColors.ON_BACKGROUND_3}\n              width=\"24px\"\n              height=\"24px\"\n            />\n            <input\n              className={`${COMPONENT_CLASS_NAME}__input__container__input-area`}\n              placeholder={stringSet.SEARCH}\n              value={inputString}\n              onChange={handleOnChangeInputString}\n            />\n            {\n              inputString && loading && (\n                <Loader\n                  className={`${COMPONENT_CLASS_NAME}__input__container__spinner`}\n                  width=\"20px\"\n                  height=\"20px\"\n                >\n                  <Icon\n                    type={IconTypes.SPINNER}\n                    fillColor={IconColors.PRIMARY}\n                    width=\"20px\"\n                    height=\"20px\"\n                  />\n                </Loader>\n              )\n            }\n            {\n              !loading && inputString && (\n                <Icon\n                  className={`${COMPONENT_CLASS_NAME}__input__container__reset-input-button`}\n                  type={IconTypes.REMOVE}\n                  fillColor={IconColors.ON_BACKGROUND_3}\n                  width=\"20px\"\n                  height=\"20px\"\n                  onClick={handleOnClickResetStringButton}\n                />\n              )\n            }\n        </div>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__message-search`}>\n        <MessageSearchProvider\n          channelUrl={channelUrl}\n          searchString={searchString}\n          onResultClick={onResultClick}\n          onResultLoaded={handleOnResultLoaded}\n          messageSearchQuery={messageSearchQuery}\n        >\n          <MessageSearch\n            renderPlaceHolderError={renderPlaceHolderError}\n            renderPlaceHolderLoading={renderPlaceHolderLoading}\n            renderPlaceHolderNoString={renderPlaceHolderNoString}\n            renderPlaceHolderEmptyList={renderPlaceHolderEmptyList}\n            renderSearchItem={renderSearchItem}\n          />\n        </MessageSearchProvider>\n      </div>\n    </div>\n  );\n}\n\nexport default MessageSearchPannel;\n"],"names":["COMPONENT_CLASS_NAME","MessageSearchPannel","props","channelUrl","onResultClick","onCloseClick","messageSearchQuery","renderPlaceHolderError","renderPlaceHolderLoading","renderPlaceHolderNoString","renderPlaceHolderEmptyList","renderSearchItem","_a","useState","searchString","setSearchString","_b","inputString","setInputString","_c","loading","setLoading","stringSet","useContext","LocalizationContext","timeout","useEffect","clearTimeout","setTimeout","handleOnChangeInputString","e","target","value","handleOnResultLoaded","handleOnClickResetStringButton","stopPropagation","React","Label","LabelTypography","H_2","LabelColors","ONBACKGROUND_1","SEARCH_IN_CHANNEL","IconButton","Icon","IconTypes","CLOSE","IconColors","ON_BACKGROUND_1","SEARCH","ON_BACKGROUND_3","Loader","SPINNER","PRIMARY","REMOVE","MessageSearchProvider","MessageSearch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBA,IAAMA,oBAAoB,GAAG,gCAA7B;;AAEA,SAASC,mBAAT,CAA6BC,KAA7B;AAEI,MAAAC,UAAU,GASRD,KAAK,WATP;AAAA,MACAE,aAAa,GAQXF,KAAK,cATP;AAAA,MAEAG,YAAY,GAOVH,KAAK,aATP;AAAA,MAGAI,kBAAkB,GAMhBJ,KAAK,mBATP;AAAA,MAIAK,sBAAsB,GAKpBL,KAAK,uBATP;AAAA,MAKAM,wBAAwB,GAItBN,KAAK,yBATP;AAAA,MAMAO,yBAAyB,GAGvBP,KAAK,0BATP;AAAA,MAOAQ,0BAA0B,GAExBR,KAAK,2BATP;AAAA,MAQAS,gBAAgB,GACdT,KAAK,iBATP;;AAWI,MAAAU,KAAkCC,cAAQ,CAAC,EAAD,CAA1C;AAAA,MAACC,YAAY,QAAb;AAAA,MAAeC,eAAe,QAA9B;;AACA,MAAAC,KAAgCH,cAAQ,CAAC,EAAD,CAAxC;AAAA,MAACI,WAAW,QAAZ;AAAA,MAAcC,cAAc,QAA5B;;AACA,MAAAC,KAAwBN,cAAQ,CAAC,KAAD,CAAhC;AAAA,MAACO,OAAO,QAAR;AAAA,MAAUC,UAAU,QAApB;;AACE,MAAAC,SAAS,GAAKC,gBAAU,CAACC,uCAAD,CAAV,UAAd;AAER,MAAIC,OAAO,GAAG,IAAd;AACAC,EAAAA,eAAS,CAAC;AACR,QAAID,OAAJ,EAAa;AACXE,MAAAA,YAAY,CAACF,OAAD,CAAZ;AACD;;AACDA,IAAAA,OAAO,GAAGG,UAAU,CAAC;AACnBb,MAAAA,eAAe,CAACE,WAAD,CAAf;AACAI,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAI,MAAAA,OAAO,GAAG,IAAV;AACD,KAJmB,EAIjB,GAJiB,CAApB;AAKD,GATQ,EASN,CAACR,WAAD,CATM,CAAT;;AAWA,MAAMY,yBAAyB,GAAG,SAA5BA,yBAA4B,CAACC,CAAD;AAChCZ,IAAAA,cAAc,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd;AACD,GAFD;;AAIA,MAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB;AAC3BZ,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD,GAFD;;AAIA,MAAMa,8BAA8B,GAAG,SAAjCA,8BAAiC,CAACJ,CAAD;AACrCA,IAAAA,CAAC,CAACK,eAAF;AACAjB,IAAAA,cAAc,CAAC,EAAD,CAAd;AACAH,IAAAA,eAAe,CAAC,EAAD,CAAf;AACD,GAJD;;AAMA,sBACEqB;AAAK,IAAA,SAAS,EAAEpC;AAAhB,kBACEoC;AAAK,IAAA,SAAS,EAAKpC,oBAAoB;AAAvC,kBACEoC,wCAACC,cAAD;AACE,IAAA,SAAS,EAAKrC,oBAAoB,oBADpC;AAEE,IAAA,IAAI,EAAEsC,wBAAe,CAACC,GAFxB;AAGE,IAAA,KAAK,EAAEC,oBAAW,CAACC;AAHrB,KAKGnB,SAAS,CAACoB,iBALb,CADF,eAQEN,wCAACO,aAAD;AACE,IAAA,SAAS,EAAK3C,oBAAoB,2BADpC;AAEE,IAAA,KAAK,EAAC,MAFR;AAGE,IAAA,MAAM,EAAC,MAHT;AAIE,IAAA,OAAO,EAAEK;AAJX,kBAME+B,wCAACQ,kBAAD;AACE,IAAA,IAAI,EAAEC,iBAAS,CAACC,KADlB;AAEE,IAAA,SAAS,EAAEC,kBAAU,CAACC,eAFxB;AAGE,IAAA,KAAK,EAAC,MAHR;AAIE,IAAA,MAAM,EAAC;AAJT,IANF,CARF,CADF,eAuBEZ;AAAK,IAAA,SAAS,EAAKpC,oBAAoB;AAAvC,kBACEoC;AAAK,IAAA,SAAS,EAAKpC,oBAAoB;AAAvC,kBACIoC,wCAACQ,kBAAD;AACE,IAAA,SAAS,EAAK5C,oBAAoB,oCADpC;AAEE,IAAA,IAAI,EAAE6C,iBAAS,CAACI,MAFlB;AAGE,IAAA,SAAS,EAAEF,kBAAU,CAACG,eAHxB;AAIE,IAAA,KAAK,EAAC,MAJR;AAKE,IAAA,MAAM,EAAC;AALT,IADJ,eAQId;AACE,IAAA,SAAS,EAAKpC,oBAAoB,mCADpC;AAEE,IAAA,WAAW,EAAEsB,SAAS,CAAC2B,MAFzB;AAGE,IAAA,KAAK,EAAEhC,WAHT;AAIE,IAAA,QAAQ,EAAEY;AAJZ,IARJ,EAeMZ,WAAW,IAAIG,OAAf,iBACEgB,wCAACe,SAAD;AACE,IAAA,SAAS,EAAKnD,oBAAoB,gCADpC;AAEE,IAAA,KAAK,EAAC,MAFR;AAGE,IAAA,MAAM,EAAC;AAHT,kBAKEoC,wCAACQ,kBAAD;AACE,IAAA,IAAI,EAAEC,iBAAS,CAACO,OADlB;AAEE,IAAA,SAAS,EAAEL,kBAAU,CAACM,OAFxB;AAGE,IAAA,KAAK,EAAC,MAHR;AAIE,IAAA,MAAM,EAAC;AAJT,IALF,CAhBR,EA+BM,CAACjC,OAAD,IAAYH,WAAZ,iBACEmB,wCAACQ,kBAAD;AACE,IAAA,SAAS,EAAK5C,oBAAoB,2CADpC;AAEE,IAAA,IAAI,EAAE6C,iBAAS,CAACS,MAFlB;AAGE,IAAA,SAAS,EAAEP,kBAAU,CAACG,eAHxB;AAIE,IAAA,KAAK,EAAC,MAJR;AAKE,IAAA,MAAM,EAAC,MALT;AAME,IAAA,OAAO,EAAEhB;AANX,IAhCR,CADF,CAvBF,eAoEEE;AAAK,IAAA,SAAS,EAAKpC,oBAAoB;AAAvC,kBACEoC,wCAACmB,2CAAD;AACE,IAAA,UAAU,EAAEpD,UADd;AAEE,IAAA,YAAY,EAAEW,YAFhB;AAGE,IAAA,aAAa,EAAEV,aAHjB;AAIE,IAAA,cAAc,EAAE6B,oBAJlB;AAKE,IAAA,kBAAkB,EAAE3B;AALtB,kBAOE8B,wCAACoB,wDAAD;AACE,IAAA,sBAAsB,EAAEjD,sBAD1B;AAEE,IAAA,wBAAwB,EAAEC,wBAF5B;AAGE,IAAA,yBAAyB,EAAEC,yBAH7B;AAIE,IAAA,0BAA0B,EAAEC,0BAJ9B;AAKE,IAAA,gBAAgB,EAAEC;AALpB,IAPF,CADF,CApEF,CADF;AAwFD;;;;"}