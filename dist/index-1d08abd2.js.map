{"version":3,"file":"index-1d08abd2.js","sources":["../src/smart-components/EditUserProfile/context/EditUserProfIleProvider.tsx","../src/smart-components/EditUserProfile/components/EditUserProfileUI/index.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport Sendbird from 'sendbird';\n\nconst EditUserProfileProviderContext = React.createContext(undefined);\n\nexport interface EditUserProfileProps {\n  children?: React.ReactNode;\n  onCancel?(): void;\n  onThemeChange?(theme: string): void;\n  onEditProfile?(updatedUser: Sendbird.User): void;\n}\n\nexport interface EditUserProfileProviderInterface {\n  onCancel?(): void;\n  onThemeChange?(theme: string): void;\n  onEditProfile?(updatedUser: Sendbird.User): void;\n}\n\nconst EditUserProfileProvider: React.FC<EditUserProfileProps> = (props: EditUserProfileProps) => {\n  const {\n    children,\n    onEditProfile,\n    onCancel,\n    onThemeChange,\n  } = props;\n\n  const value = useMemo(() => {\n    return {\n      onEditProfile,\n      onCancel,\n      onThemeChange,\n    };\n  }, []);\n\n  return (\n    <EditUserProfileProviderContext.Provider value={value}>\n      {children}\n    </EditUserProfileProviderContext.Provider>\n  );\n}\n\nconst useEditUserProfileProvider = (): EditUserProfileProviderInterface => (\n  React.useContext(EditUserProfileProviderContext)\n);\n\nexport {\n  EditUserProfileProvider,\n  useEditUserProfileProvider,\n};\n","import './edit-user-profile.scss';\n\nimport React, {\n  ReactElement,\n  useRef,\n  useState,\n  useContext,\n} from 'react';\nimport { useEditUserProfileProvider } from '../../context/EditUserProfIleProvider';\n\nimport Modal from '../../../../ui/Modal';\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\n\nimport Input, { InputLabel } from '../../../../ui/Input';\nimport Avatar from '../../../../ui/Avatar';\nimport Icon, { IconTypes } from '../../../../ui/Icon';\nimport { Type as ButtonType } from '../../../../ui/Button/type';\nimport Label, { LabelColors, LabelTypography } from '../../../../ui/Label';\nimport TextButton from '../../../../ui/TextButton';\nimport { noop } from '../../../../utils/utils';\nimport * as userActions from '../../../../lib/dux/user/actionTypes';\n\nexport default function EditUserProfile(): ReactElement {\n  const editProfileProps = useEditUserProfileProvider();\n  const store = useSendbirdStateContext();\n  const hiddenInputRef = useRef(null);\n  const inputRef = useRef(null);\n  const formRef = useRef(null);\n  const { stringSet } = useContext(LocalizationContext);\n  const [currentImg, setCurrentImg] = useState(null);\n  const [newFile, setNewFile] = useState(null);\n\n  const {\n    onEditProfile,\n    onCancel,\n    onThemeChange,\n  } = editProfileProps;\n\n  const theme = store?.config?.theme || 'light';\n  const changeTheme = store?.config?.setCurrenttheme || noop;\n  const user = store?.stores?.userStore?.user;\n  const sdk = store?.stores?.sdkStore?.sdk;\n  const userDispatcher = store?.dispatchers?.userDispatcher;\n\n  return (\n    <Modal\n      titleText={stringSet.EDIT_PROFILE__TITLE}\n      submitText={stringSet.BUTTON__SAVE}\n      type={ButtonType.PRIMARY}\n      onCancel={onCancel}\n      onSubmit={() => {\n        if (user?.nickname !== '' && !inputRef.current.value) {\n          if (formRef.current.reportValidity) { // might not work in explorer\n            formRef.current.reportValidity();\n          }\n          return;\n        }\n        sdk?.updateCurrentUserInfoWithProfileImage(inputRef?.current?.value, newFile, (updatedUser) => {\n          userDispatcher({ type: userActions.UPDATE_USER_INFO, payload: updatedUser });\n          if (onEditProfile && typeof onEditProfile === 'function') {\n            onEditProfile(updatedUser);\n          }\n        });\n      }}\n    >\n      <form\n        className=\"sendbird-edit-user-profile\"\n        ref={formRef}\n        onSubmit={(e) => { e.preventDefault(); }}\n      >\n        <section className=\"sendbird-edit-user-profile__img\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__IMAGE_LABEL}\n          </InputLabel>\n          <div className=\"sendbird-edit-user-profile__img__avatar\">\n            <Avatar\n              width=\"80px\"\n              height=\"80px\"\n              src={currentImg || user?.profileUrl}\n            />\n          </div>\n          <input\n            ref={hiddenInputRef}\n            type=\"file\"\n            accept=\"image/gif, image/jpeg, image/png\"\n            style={{ display: 'none' }}\n            onChange={(e) => {\n              setCurrentImg(URL.createObjectURL(e.target.files[0]));\n              setNewFile(e.target.files[0]);\n              hiddenInputRef.current.value = '';\n            }}\n          />\n          <TextButton\n            className=\"sendbird-edit-user-profile__img__avatar-button\"\n            notUnderline\n            onClick={() => hiddenInputRef.current.click()}\n          >\n            <Label type={LabelTypography.BUTTON_1} color={LabelColors.PRIMARY}>\n              {stringSet.EDIT_PROFILE__IMAGE_UPLOAD}\n            </Label>\n          </TextButton>\n        </section>\n        <section className=\"sendbird-edit-user-profile__name\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__NICKNAME_LABEL}\n          </InputLabel>\n          <Input\n            required={user?.nickname !== ''}\n            name=\"sendbird-edit-user-profile__name__input\"\n            ref={inputRef}\n            value={user?.nickname}\n            placeHolder={stringSet.EDIT_PROFILE__NICKNAME_PLACEHOLDER}\n          />\n        </section>\n        <section className=\"sendbird-edit-user-profile__userid\">\n          <InputLabel>\n            {/*  userID */}\n            {stringSet.EDIT_PROFILE__USERID_LABEL}\n          </InputLabel>\n          <Input\n            disabled\n            name=\"sendbird-edit-user-profile__userid__input\"\n            value={user?.userId}\n          />\n        </section>\n        <section className=\"sendbird-edit-user-profile__theme\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__THEME_LABEL}\n          </InputLabel>\n          <div className=\"sendbird-edit-user-profile__theme__theme-icon\">\n            {\n              theme === 'dark'\n                ? (\n                  <Icon\n                    onClick={() => {\n                      changeTheme('light');\n                      onThemeChange?.('light');\n                      // if (onThemeChange && typeof onThemeChange === 'function') {\n                      //   onThemeChange('light');\n                      // }\n                    }}\n                    type={IconTypes.TOGGLE_ON}\n                    width={44}\n                    height={24}\n                  />\n                )\n                : (\n                  <Icon\n                    onClick={() => {\n                      changeTheme('dark');\n                      onThemeChange?.('dark');\n                      // if (onThemeChange && typeof onThemeChange === 'function') {\n                      //   onThemeChange('dark');\n                      // }\n                    }}\n                    type={IconTypes.TOGGLE_OFF}\n                    width={44}\n                    height={24}\n                  />\n                )\n            }\n          </div>\n        </section>\n      </form>\n    </Modal>\n  );\n}\n\n"],"names":["EditUserProfileProviderContext","React","createContext","undefined","EditUserProfileProvider","props","children","onEditProfile","onCancel","onThemeChange","value","useMemo","useEditUserProfileProvider","useContext","EditUserProfile","editProfileProps","store","useSendbirdStateContext","hiddenInputRef","useRef","inputRef","formRef","stringSet","LocalizationContext","_h","useState","currentImg","setCurrentImg","_j","newFile","setNewFile","theme","config","changeTheme","setCurrenttheme","noop","user","stores","userStore","sdk","sdkStore","userDispatcher","dispatchers","EDIT_PROFILE__TITLE","BUTTON__SAVE","ButtonType","PRIMARY","nickname","current","reportValidity","updateCurrentUserInfoWithProfileImage","updatedUser","type","userActions","payload","e","preventDefault","EDIT_PROFILE__IMAGE_LABEL","profileUrl","display","URL","createObjectURL","target","files","click","LabelTypography","BUTTON_1","LabelColors","EDIT_PROFILE__IMAGE_UPLOAD","EDIT_PROFILE__NICKNAME_LABEL","EDIT_PROFILE__NICKNAME_PLACEHOLDER","EDIT_PROFILE__USERID_LABEL","userId","EDIT_PROFILE__THEME_LABEL","IconTypes","TOGGLE_ON","TOGGLE_OFF"],"mappings":"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"}