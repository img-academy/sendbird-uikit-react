{"version":3,"file":"UserListItem.js","sources":["../../../src/smart-components/ChannelSettings/components/UserListItem/index.tsx"],"sourcesContent":["import React, { ReactElement, useRef, useContext } from 'react';\n\nimport SendBird from 'sendbird';\n\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\nimport { UserProfileContext } from '../../../../lib/UserProfileContext';\nimport Avatar from '../../../../ui/Avatar/index';\nimport MutedAvatarOverlay from '../../../../ui/Avatar/MutedAvatarOverlay';\nimport Label, { LabelTypography, LabelColors } from '../../../../ui/Label';\nimport UserProfile from '../../../../ui/UserProfile';\nimport ContextMenu, { MenuItems } from '../../../../ui/ContextMenu';\n\nimport './user-list-item.scss';\n\nconst COMPONENT_NAME = 'sendbird-user-list-item--small';\n\ninterface ActionProps {\n  actionRef: React.RefObject<HTMLInputElement>;\n  parentRef: React.RefObject<HTMLInputElement>;\n}\n\ntype CustomUser = SendBird.User & {\n  isMuted: boolean;\n  role: string;\n};\n\ninterface Props {\n  user: CustomUser;\n  currentUser?: string;\n  className?: string;\n  action?(props: ActionProps): ReactElement;\n}\n\nconst UserListItem = ({\n  user,\n  className,\n  currentUser,\n  action,\n}: Props): ReactElement => {\n  const actionRef = useRef(null);\n  const parentRef = useRef(null);\n  const avatarRef = useRef(null);\n  const { stringSet } = useContext(LocalizationContext);\n  const {\n    disableUserProfile,\n    renderUserProfile,\n  } = useContext(UserProfileContext);\n  const injectingClassNames = Array.isArray(className) ? className : [className];\n  return (\n    <div\n      ref={parentRef}\n      className={[\n        COMPONENT_NAME, ...injectingClassNames,\n      ].join(' ')}\n    >\n      {\n        user.isMuted && (\n          <MutedAvatarOverlay />\n        )\n      }\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <Avatar\n            onClick={() => {\n              if (!disableUserProfile) {\n                toggleDropdown();\n              }\n            }}\n            ref={avatarRef}\n            className={`${COMPONENT_NAME}__avatar`}\n            src={user.profileUrl}\n            width={24}\n            height={24}\n          />\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            openLeft\n            parentRef={avatarRef}\n            // for catching location(x, y) of MenuItems\n            parentContainRef={avatarRef}\n            // for toggling more options(menus & reactions)\n            closeDropdown={closeDropdown}\n            style={{ paddingTop: 0, paddingBottom: 0 }}\n          >\n            {\n              renderUserProfile\n                ? renderUserProfile({\n                  user,\n                  currentUserId: currentUser,\n                  close: closeDropdown,\n                })\n                : (\n                  <UserProfile\n                    user={user}\n                    currentUserId={currentUser}\n                    onSuccess={closeDropdown}\n                  />\n                )\n            }\n          </MenuItems>\n        )}\n      />\n      <Label\n        className={`${COMPONENT_NAME}__title`}\n        type={LabelTypography.SUBTITLE_1}\n        color={LabelColors.ONBACKGROUND_1}\n      >\n        {user.nickname || stringSet.NO_NAME}\n        {\n          (currentUser === user.userId) && (\n            \" (You)\"\n          )\n        }\n      </Label>\n      { // if there is now nickname, display userId\n        !user.nickname && (\n          <Label\n            className={`${COMPONENT_NAME}__subtitle`}\n            type={LabelTypography.CAPTION_3}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {user.userId}\n          </Label>\n        )\n      }\n      {\n        user.role === 'operator' && (\n          <Label\n            className={`${COMPONENT_NAME}__operator`}\n            type={LabelTypography.SUBTITLE_2}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            Operator\n          </Label>\n        )\n      }\n      {\n        action && (\n          <div ref={actionRef} className={`${COMPONENT_NAME}__action`}>\n            { action({ actionRef, parentRef }) }\n          </div>\n        )\n      }\n    </div>\n  );\n}\n\nexport default UserListItem;\n"],"names":["COMPONENT_NAME","UserListItem","_a","user","className","currentUser","action","actionRef","useRef","parentRef","avatarRef","stringSet","useContext","LocalizationContext","_b","UserProfileContext","disableUserProfile","renderUserProfile","injectingClassNames","Array","isArray","React","__spreadArray","join","isMuted","toggleDropdown","profileUrl","closeDropdown","paddingTop","paddingBottom","currentUserId","close","UserProfile","LabelTypography","SUBTITLE_1","LabelColors","ONBACKGROUND_1","nickname","NO_NAME","userId","CAPTION_3","ONBACKGROUND_2","role","SUBTITLE_2"],"mappings":"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"}