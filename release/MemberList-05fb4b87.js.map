{"version":3,"file":"MemberList-05fb4b87.js","sources":["../src/smart-components/ChannelSettings/components/AdminPanel/MembersModal.tsx","../src/smart-components/ChannelSettings/components/AdminPanel/InviteMembersModal.tsx","../src/smart-components/ChannelSettings/components/AdminPanel/MemberList.tsx"],"sourcesContent":["import React, {\n  ReactElement,\n  useEffect,\n  useState,\n} from 'react'\n\nimport Modal from '../../../../ui/Modal';\nimport UserListItem from '../../../../ui/UserListItem';\nimport IconButton from '../../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../../ui/Icon';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../../ui/ContextMenu';\nimport { noop } from '../../../../utils/utils';\n\nimport { useChannelSettings } from '../../context/ChannelSettingsProvider';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\n\ninterface Props {\n  onCancel(): void;\n}\n\nexport default function MembersModal({ onCancel }: Props): ReactElement {\n  const [members, setMembers] = useState([]);\n  const [memberQuery, setMemberQuery] = useState(null);\n\n  const { channel } = useChannelSettings();\n  const state = useSendbirdStateContext();\n  const currentUser = state?.config?.userId;\n\n  useEffect(() => {\n    const memberListQuery = channel.createMemberListQuery();\n    memberListQuery.limit = 20;\n    memberListQuery.next((members, error) => {\n      if (error) {\n        return;\n      }\n      setMembers(members);\n    });\n    setMemberQuery(memberListQuery);\n  }, [])\n  return (\n    <div>\n      <Modal\n        hideFooter\n        onCancel={() => onCancel()}\n        onSubmit={noop}\n        titleText=\"All Members\"\n      >\n        <div\n          className=\"sendbird-more-members__popup-scroll\"\n          onScroll={(e) => {\n            const { hasNext } = memberQuery;\n            const target = e.target as HTMLTextAreaElement;\n            const fetchMore = (\n              target.clientHeight + target.scrollTop === target.scrollHeight\n            );\n\n            if (hasNext && fetchMore) {\n              memberQuery.next((o, error) => {\n                if (error) {\n                  return;\n                }\n                setMembers([\n                  ...members,\n                  ...o,\n                ])\n              });\n            }\n          }}\n        >\n          { members.map((member) => (\n            <UserListItem\n              user={member}\n              key={member.userId}\n              currentUser={currentUser}\n              action={({ parentRef, actionRef }) => (\n                <>\n                  {channel.myRole === 'operator' && (\n                    <ContextMenu\n                      menuTrigger={(toggleDropdown) => (\n                        <IconButton\n                          className=\"sendbird-user-message__more__menu\"\n                          width=\"32px\"\n                          height=\"32px\"\n                          onClick={toggleDropdown}\n                        >\n                          <Icon\n                            width=\"24px\"\n                            height=\"24px\"\n                            type={IconTypes.MORE}\n                            fillColor={IconColors.CONTENT_INVERSE}\n                          />\n                        </IconButton>\n                      )}\n                      menuItems={(closeDropdown) => (\n                        <MenuItems\n                          parentContainRef={parentRef}\n                          parentRef={actionRef} // for catching location(x, y) of MenuItems\n                          closeDropdown={closeDropdown}\n                          openLeft\n                        >\n                          <MenuItem\n                            onClick={() => {\n                              if ((member.role !== 'operator')) {\n                                channel.addOperators([member.userId], () => {\n                                  setMembers(members.map(m => {\n                                    if(m.userId === member.userId) {\n                                      return {\n                                        ...member,\n                                        role: 'operator',\n                                      };\n                                    }\n                                    return m;\n                                  }));\n                                  closeDropdown();\n                                });\n                              } else {\n                                channel.removeOperators([member.userId], () => {\n                                  setMembers(members.map(m => {\n                                    if(m.userId === member.userId) {\n                                      return {\n                                        ...member,\n                                        role: '',\n                                      };\n                                    }\n                                    return m;\n                                  }));\n                                  closeDropdown();\n                                });\n                              }\n                            }}\n                          >\n                            { member.role !== 'operator' ? 'Promote to operator' : 'Demote operator'}\n                          </MenuItem>\n                          {\n                            // No muted members in broadcast channel\n                            !channel.isBroadcast && (\n                              <MenuItem\n                                onClick={() => {\n                                  if (member.isMuted) {\n                                    channel.unmuteUser(member, () => {\n                                      setMembers(members.map(m => {\n                                        if(m.userId === member.userId) {\n                                          return {\n                                            ...member,\n                                            isMuted: false,\n                                          };\n                                        }\n                                        return m;\n                                      }));\n                                      closeDropdown();\n                                    })\n                                  } else {\n                                    channel.muteUser(member, () => {\n                                      setMembers(members.map(m => {\n                                        if(m.userId === member.userId) {\n                                          return {\n                                            ...member,\n                                            isMuted: true,\n                                          };\n                                        }\n                                        return m;\n                                      }));\n                                      closeDropdown();\n                                    });\n                                  }\n                                }}\n                              >\n                                { member.isMuted ? 'Unmute' : 'Mute' }\n                              </MenuItem>\n                            )\n                          }\n                          <MenuItem\n                            onClick={() => {\n                              channel.banUser(member, -1, '', () => {\n                                setMembers(members.filter(({ userId }) => {\n                                  return userId !== member.userId;\n                                }));\n                              });\n                            }}\n                          >\n                            Ban\n                          </MenuItem>\n                        </MenuItems>\n                      )}\n                    />\n                  )}\n                </>\n              )}\n            />\n          ))}\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import React, { ReactElement, useEffect, useState } from 'react'\n\nimport Modal from '../../../../ui/Modal';\nimport { Type as ButtonType } from '../../../../ui/Button/type';\nimport UserListItem from '../../../../ui/UserListItem';\nimport { useChannelSettings } from '../../context/ChannelSettingsProvider';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\n\ninterface Props {\n  onCancel(): void;\n  onSubmit(members: Array<string>): void;\n}\n\nexport default function InviteMembers({\n  onCancel,\n  onSubmit,\n}: Props): ReactElement {\n  const [members, setMembers] = useState([]);\n  const [selectedMembers, setSelectedMembers] = useState({});\n  const [userQuery, setUserQuery] = useState(null);\n\n  const state = useSendbirdStateContext();\n  const sdk = state?.stores?.sdkStore?.sdk;\n\n  const { channel } = useChannelSettings();\n\n  useEffect(() => {\n    const userListQuery = sdk?.createApplicationUserListQuery();\n    userListQuery.next((members, error) => {\n      if (error) {\n        return;\n      }\n      setMembers(members);\n    });\n    setUserQuery(userListQuery);\n  }, [sdk])\n  return (\n    <div>\n      <Modal\n        disabled={Object.keys(selectedMembers).length === 0}\n        submitText=\"Invite\"\n        type={ButtonType.PRIMARY}\n        onCancel={() => onCancel()}\n        onSubmit={() => {\n          const members = Object.keys(selectedMembers).filter((m) => selectedMembers[m]);\n          channel.inviteWithUserIds(members).then(() => {\n            onSubmit(members);\n          });\n        }}\n        titleText=\"Select members\"\n      >\n        <div\n          className=\"sendbird-more-members__popup-scroll\"\n          onScroll={(e) => {\n            const { hasNext } = userQuery;\n            const target = e.target as HTMLTextAreaElement;\n            const fetchMore = (\n              target.clientHeight + target.scrollTop === target.scrollHeight\n            );\n            if (hasNext && fetchMore) {\n              userQuery.next((users, error) => {\n                if (error) {\n                  return;\n                }\n                setMembers([\n                  ...members,\n                  ...users,\n                ])\n              });\n            }\n          }}\n        >\n          <div className=\"sendbird-more-members__popup-scroll__inner\">\n            { members.map((member) => (\n              <UserListItem\n                checkBox\n                checked={selectedMembers[member.userId]}\n                onChange={\n                  (event) => {\n                    const modifiedSelectedMembers = {\n                      ...selectedMembers,\n                      [event.target.id]: event.target.checked,\n                    };\n                    if (!event.target.checked) {\n                      delete modifiedSelectedMembers[event.target.id];\n                    }\n                    setSelectedMembers(modifiedSelectedMembers);\n                  }\n                }\n                user={member}\n                key={member.userId}\n              />\n            ))}\n          </div>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import React, {\n  ReactElement,\n  useEffect,\n  useState,\n  useCallback,\n} from 'react';\n\nimport Button, { ButtonTypes, ButtonSizes } from '../../../../ui/Button';\nimport IconButton from '../../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../../ui/Icon';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../../ui/ContextMenu';\n\nimport UserListItem from '../UserListItem';\nimport MembersModal from './MembersModal';\nimport InviteMembers from './InviteMembersModal';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { useChannelSettings } from '../../context/ChannelSettingsProvider';\nimport uuidv4 from '../../../../utils/uuid';\n\nexport const MemberList = (): ReactElement => {\n  const [members, setMembers] = useState([]);\n  const [hasNext, setHasNext] = useState(false);\n  const [showAllMembers, setShowAllMembers] = useState(false);\n  const [showInviteMembers, setShowInviteMembers] = useState(false);\n\n  const state = useSendbirdStateContext();\n  const {\n    channel,\n    setChannelUpdateId,\n  } = useChannelSettings();\n\n  const sdk = state?.stores?.sdkStore?.sdk;\n  const userId = state?.config?.userId;\n\n  useEffect(() => {\n    if (!channel) {\n      setMembers([]);\n      return;\n    }\n\n    const memberUserListQuery = channel.createMemberListQuery();\n    memberUserListQuery.limit = 10;\n    memberUserListQuery.next((members, error) => {\n      if (error) {\n        return;\n      }\n      setMembers(members);\n      setHasNext(memberUserListQuery.hasNext);\n    });\n  }, [channel]);\n\n  const refershList = useCallback(\n    () => {\n      if (!channel) {\n        setMembers([]);\n        return;\n      }\n      const memberUserListQuery = channel.createMemberListQuery();\n      memberUserListQuery.limit = 10;\n      memberUserListQuery.next((members, error) => {\n        if (error) {\n          return;\n        }\n        setMembers(members);\n        setHasNext(memberUserListQuery.hasNext);\n        setChannelUpdateId(uuidv4());\n      });\n    },\n    [channel],\n  );\n\n  return (\n    <>\n      {\n        members.map((member) => (\n          <UserListItem\n            key={member.userId}\n            user={member}\n            currentUser={sdk.currentUser.userId}\n            action={\n              (userId !== member.userId)\n                ? ({ actionRef, parentRef }) => (\n                  <ContextMenu\n                    menuTrigger={(toggleDropdown) => (\n                      <IconButton\n                        className=\"sendbird-user-message__more__menu\"\n                        width=\"32px\"\n                        height=\"32px\"\n                        onClick={toggleDropdown}\n                      >\n                        <Icon\n                          width=\"24px\"\n                          height=\"24px\"\n                          type={IconTypes.MORE}\n                          fillColor={IconColors.CONTENT_INVERSE}\n                        />\n                      </IconButton>\n                    )}\n                    menuItems={(closeDropdown) => (\n                      <MenuItems\n                        parentContainRef={parentRef}\n                        parentRef={actionRef} // for catching location(x, y) of MenuItems\n                        closeDropdown={closeDropdown}\n                        openLeft\n                      >\n                        <MenuItem\n                          onClick={() => {\n                            if ((member.role !== 'operator')) {\n                              channel.addOperators([member.userId], () => {\n                                refershList();\n                                closeDropdown();\n                              });\n                            } else {\n                              channel.removeOperators([member.userId], () => {\n                                refershList();\n                                closeDropdown();\n                              });\n                            }\n                          }}\n                        >\n                          {member.role !== 'operator' ? 'Promote to operator' : 'Demote operator'}\n                        </MenuItem>\n                        {\n                          // No muted members in broadcast channel\n                          !channel.isBroadcast && (\n                            <MenuItem\n                              onClick={() => {\n                                if (member.isMuted) {\n                                  channel.unmuteUser(member, () => {\n                                    refershList();\n                                    closeDropdown();\n                                  })\n                                } else {\n                                  channel.muteUser(member, () => {\n                                    refershList();\n                                    closeDropdown();\n                                  });\n                                }\n                              }}\n                            >\n                              { member.isMuted ? 'Unmute' : 'Mute'}\n                            </MenuItem>\n                          )\n                        }\n                        <MenuItem\n                          onClick={() => {\n                            channel.banUser(member, -1, '', () => {\n                              refershList();\n                              closeDropdown();\n                            });\n                          }}\n                        >\n                          Ban\n                    </MenuItem>\n                      </MenuItems>\n                    )}\n                  />\n                )\n                : null\n            }\n          />\n        ))\n      }\n      <div\n        className=\"sendbird-channel-settings-accordion__footer\"\n      >\n        {\n          hasNext && (\n            <Button\n              type={ButtonTypes.SECONDARY}\n              size={ButtonSizes.SMALL}\n              onClick={() => setShowAllMembers(true)}\n            >\n              All members\n            </Button>\n          )\n        }\n        <Button\n          type={ButtonTypes.SECONDARY}\n          size={ButtonSizes.SMALL}\n          onClick={() => setShowInviteMembers(true)}\n        >\n          Invite members\n        </Button>\n      </div>\n      {\n        showAllMembers && (\n          <MembersModal\n            onCancel={() => {\n              setShowAllMembers(false);\n              refershList();\n            }}\n          />\n        )\n      }\n      {\n        showInviteMembers && (\n          <InviteMembers\n            onSubmit={() => {\n              setShowInviteMembers(false);\n              refershList();\n            }}\n            onCancel={() => setShowInviteMembers(false)}\n          />\n        )\n      }\n    </>\n  );\n}\n\nexport default MemberList;\n"],"names":["MembersModal","_a","onCancel","_c","useState","members","setMembers","_d","memberQuery","setMemberQuery","channel","useChannelSettings","state","useSendbirdStateContext","currentUser","config","userId","useEffect","memberListQuery","createMemberListQuery","limit","next","error","React","noop","e","hasNext","target","fetchMore","clientHeight","scrollTop","scrollHeight","o","map","member","parentRef","actionRef","myRole","toggleDropdown","IconTypes","MORE","IconColors","CONTENT_INVERSE","closeDropdown","role","addOperators","m","removeOperators","isBroadcast","isMuted","unmuteUser","muteUser","banUser","filter","InviteMembers","onSubmit","_e","selectedMembers","setSelectedMembers","_f","userQuery","setUserQuery","sdk","stores","sdkStore","userListQuery","createApplicationUserListQuery","Object","keys","length","ButtonType","PRIMARY","inviteWithUserIds","then","users","event","modifiedSelectedMembers","id","checked","MemberList","setHasNext","showAllMembers","setShowAllMembers","_g","showInviteMembers","setShowInviteMembers","_h","setChannelUpdateId","memberUserListQuery","refershList","useCallback","uuidv4","UserListItem","ButtonTypes","SECONDARY","ButtonSizes","SMALL"],"mappings":"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"}