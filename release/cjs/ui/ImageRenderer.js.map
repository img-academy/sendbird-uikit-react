{"version":3,"file":"ImageRenderer.js","sources":["../../../src/ui/ImageRenderer/index.jsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\n/*\n  ImageRenderer displays image with url or source\n  it checks if the source exist with img tag first\n  if it exists onLoad is called, if not onError is called\n  and those properties switch img tag to real purposing element\n*/\n\n// TODO: Set up the official constant of width and height with DesignTeam\n\nexport default function ImageRenderer({\n  className,\n  url,\n  alt,\n  width,\n  height,\n  fixedSize,\n  defaultComponent,\n  circle,\n  placeHolder, // a function returing JSX / (style) => Element\n  onLoad,\n  onError,\n}) {\n  const [showDefaultComponent, setShowDefaultComponent] = useState(false);\n  const [showPlaceHolder, setShowPlaceHolder] = useState(true);\n\n  const DefaultComponent = useMemo(() => {\n    if (typeof defaultComponent === 'function') {\n      return defaultComponent();\n    }\n    return defaultComponent;\n  }, [defaultComponent]);\n\n  const PlaceHolder = useMemo(() => {\n    if (placeHolder && typeof placeHolder === 'function') {\n      return placeHolder({\n        style: {\n          width: '100%',\n          minWidth: width,\n          maxWidth: fixedSize ? width : '400px',\n          height,\n          position: 'absolute',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        },\n      });\n    }\n    return null;\n  }, [placeHolder]);\n\n  const HiddenImageLoader = useMemo(() => {\n    setShowDefaultComponent(false);\n    // reset the state when url is changed\n    return (\n      <img\n        className=\"sendbird-image-renderer__hidden-image-loader\"\n        src={url}\n        alt={alt}\n        onLoad={() => {\n          setShowPlaceHolder(false);\n          onLoad();\n        }}\n        onError={() => {\n          setShowDefaultComponent(true);\n          onError();\n        }}\n      />\n    );\n  }, [url]);\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-image-renderer',\n      ].join(' ')}\n      style={{\n        width: '100%',\n        minWidth: width,\n        maxWidth: fixedSize ? width : '400px',\n        height,\n      }}\n    >\n      {showPlaceHolder && PlaceHolder}\n      {\n        showDefaultComponent\n          ? DefaultComponent\n          : (\n            <div\n              className=\"sendbird-image-renderer__image\"\n              style={{\n                width: '100%',\n                minWidth: width,\n                maxWidth: fixedSize ? width : '400px',\n                height,\n                position: 'absolute',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                backgroundSize: 'cover',\n                backgroundImage: `url(${url})`,\n                borderRadius: circle ? '50%' : null,\n              }}\n            />\n          )\n      }\n      {HiddenImageLoader}\n    </div>\n  );\n}\n\nImageRenderer.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.string),\n    PropTypes.string,\n  ]),\n  url: PropTypes.string.isRequired,\n  alt: PropTypes.string,\n  width: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  height: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  fixedSize: PropTypes.bool,\n  defaultComponent: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.func,\n  ]),\n  placeHolder: PropTypes.func,\n  circle: PropTypes.bool,\n  onLoad: PropTypes.func,\n  onError: PropTypes.func,\n};\nImageRenderer.defaultProps = {\n  className: '',\n  defaultComponent: null,\n  placeHolder: null,\n  alt: '',\n  width: null,\n  height: null,\n  fixedSize: false,\n  circle: false,\n  onLoad: () => { },\n  onError: () => { },\n};\n"],"names":["ImageRenderer","className","url","alt","width","height","fixedSize","defaultComponent","circle","placeHolder","onLoad","onError","useState","showDefaultComponent","setShowDefaultComponent","showPlaceHolder","setShowPlaceHolder","DefaultComponent","useMemo","PlaceHolder","style","minWidth","maxWidth","position","display","justifyContent","alignItems","HiddenImageLoader","React","Array","isArray","join","backgroundRepeat","backgroundPosition","backgroundSize","backgroundImage","borderRadius","propTypes","PropTypes","oneOfType","arrayOf","string","isRequired","number","bool","element","func","defaultProps"],"mappings":"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"}